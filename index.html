<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>AI Diet Planner</title>
  <style>
    body {margin:0; font-family:system-ui; background:#0b0c10; color:#e6e7eb;}
    .app {max-width:900px; margin:40px auto; display:grid; grid-template-columns:1fr 1fr; gap:20px; padding:0 20px;}
    .card {background:#111319; border-radius:18px; padding:20px; box-shadow:0 6px 18px rgba(0,0,0,.35);}
    .btn {display:inline-block; padding:12px 18px; border-radius:12px;
          background:linear-gradient(135deg,#6ee7b7,#60a5fa); color:#0b1220;
          font-weight:700; cursor:pointer; border:none;}
    input[type=file]{display:none}
    .preview img {max-width:100%; border-radius:14px; border:1px solid rgba(255,255,255,.1);}
    .diet {margin-top:12px; line-height:1.5;}
    h2 {margin-top:0;}
  </style>
</head>
<body>
  <header style="text-align:center; margin:20px;">
    <h1>AI Diet Planner (online)</h1>
    <p>Загрузи фото — получи готовую диету / Upload a photo — get your diet</p>
  </header>

  <main class="app">
    <!-- Левая панель: загрузка -->
    <section class="card">
      <h2>Загрузка фото / Upload Photo</h2>
      <label class="btn" for="file">Выбрать фото / Choose Photo</label>
      <input type="file" id="file" accept="image/*">
      <div class="preview" style="margin-top:16px">
        <img id="img" hidden>
      </div>
      <button class="btn" id="analyze" style="margin-top:16px">Назначить диету / Generate Diet</button>
    </section>

    <!-- Правая панель: результат -->
    <section class="card">
      <h2>Твоя диета / Your Diet</h2>
      <div id="result" class="diet">Здесь появится план питания / Diet plan will appear here</div>
    </section>
  </main>

  <script>
    const fileInput = document.getElementById('file');
    const img = document.getElementById('img');
    const analyzeBtn = document.getElementById('analyze');
    const resultEl = document.getElementById('result');

    const diets = [
      {
        title: {ru: "Похудение", en: "Weight Loss"},
        text: {
          ru: "08:00 – Завтрак: овсянка с ягодами и зелёный чай (300 ккал)<br>13:00 – Обед: куриная грудка на гриле + овощной салат (450 ккал)<br>19:00 – Ужин: салат с тунцом и овощами (350 ккал)<br><b>Итого: ~1100 ккал</b>",
          en: "08:00 – Breakfast: oatmeal with berries and green tea (300 kcal)<br>13:00 – Lunch: grilled chicken breast + vegetable salad (450 kcal)<br>19:00 – Dinner: tuna salad with vegetables (350 kcal)<br><b>Total: ~1100 kcal</b>"
        }
      },
      {
        title: {ru: "Набор массы", en: "Muscle Gain"},
        text: {
          ru: "08:00 – Завтрак: омлет из 4 яиц + цельнозерновой хлеб, кофе (500 ккал)<br>13:30 – Обед: рис + говядина + овощи на пару (700 ккал)<br>20:00 – Ужин: паста с курицей и соусом (600 ккал)<br><b>Итого: ~1800 ккал</b>",
          en: "08:00 – Breakfast: 4-egg omelet + whole-grain bread, coffee (500 kcal)<br>13:30 – Lunch: rice + beef + steamed vegetables (700 kcal)<br>20:00 – Dinner: pasta with chicken and sauce (600 kcal)<br><b>Total: ~1800 kcal</b>"
        }
      },
      {
        title: {ru: "Поддержание веса", en: "Weight Maintenance"},
        text: {
          ru: "07:30 – Завтрак: йогурт с мюсли и фруктами (350 ккал)<br>13:00 – Обед: курица + гречка + овощи (550 ккал)<br>19:30 – Ужин: рыба на пару + салат из свежих овощей (450 ккал)<br><b>Итого: ~1350 ккал</b>",
          en: "07:30 – Breakfast: yogurt with muesli and fruits (350 kcal)<br>13:00 – Lunch: chicken + buckwheat + vegetables (550 kcal)<br>19:30 – Dinner: steamed fish + fresh vegetable salad (450 kcal)<br><b>Total: ~1350 kcal</b>"
        }
      }
    ];

    fileInput.addEventListener('change', e=>{
      const f = e.target.files[0];
      if(f){
        img.src = URL.createObjectURL(f);
        img.hidden = false;
      }
    });

    analyzeBtn.addEventListener('click', ()=>{
      const d = diets[Math.floor(Math.random()*diets.length)];

      // Определяем язык браузера
      const userLang = navigator.language.startsWith('ru') ? 'ru' : 'en';
      resultEl.innerHTML = `<h3>${d.title[userLang]}</h3>${d.text[userLang]}`;

      // Тексты для озвучки
      const textRu = d.title.ru + ', ' + d.text.ru.replace(/<br>/g, ', ');
      const textEn = d.title.en + ', ' + d.text.en.replace(/<br>/g, ', ');

      // Создаём объекты озвучки
      const utterRu = new SpeechSynthesisUtterance(textRu);
      utterRu.lang = 'ru-RU';
      const utterEn = new SpeechSynthesisUtterance(textEn);
      utterEn.lang = 'en-US';

      // Русская озвучка, затем английская
      utterRu.onend = ()=>speechSynthesis.speak(utterEn);
      speechSynthesis.speak(utterRu);
    });
  </script>
</body>
</html>
