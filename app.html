<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>AI Diet Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin:0;
      font-family:system-ui;
      background:#0b0c10;
      color:#FFD700;
      display:flex;
      flex-direction:column;
      align-items:center;
      position:relative;
      z-index:1;
    }
    video.bg-video {
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:-1;
    }
    header {text-align:center;margin:20px;}
    .container {max-width:1400px;width:100%;display:flex;gap:20px;margin:20px;justify-content:center;}
    .side-img {flex:0 0 250px;display:flex;flex-direction:column;gap:20px;}
    .side-img img {width:100%;border-radius:14px;border:1px solid rgba(255,255,255,.1);}
    .app {flex:1;display:flex;gap:20px;flex-wrap:wrap;}
    .card {
      background:rgba(17,19,25,0.9);
      border-radius:18px;
      padding:20px;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      flex:1 1 300px;
    }
    .btn {
      display:inline-block;
      padding:12px 18px;
      border-radius:12px;
      background:linear-gradient(135deg,#6ee7b7,#60a5fa);
      color:#0b1220;
      font-weight:700;
      cursor:pointer;
      border:none;
      margin-top:10px;
      text-decoration:none;
      text-align:center;
    }
    .btn:hover {opacity:0.9;transform:scale(1.05);transition:0.2s;}
    input[type=file]{display:none}
    .preview img {max-width:100%;border-radius:14px;border:1px solid rgba(255,255,255,.1);}
    .diet {margin-top:12px;line-height:1.5;}
    h2 {margin-top:0;}
    #lang-switcher {display:flex;justify-content:center;gap:10px;margin-top:10px;}
    .flag {cursor:pointer;width:40px;height:28px;border-radius:6px;border:2px solid transparent;transition:all 0.3s ease;}
    .flag:hover {transform:scale(1.2);}
    .flag.active {border-color:#60a5fa;background: rgba(96,165,250,0.2);}
    .inputs {margin-top:15px;display:flex;gap:10px;flex-wrap:wrap;}
    .inputs input {flex:1 1 120px;padding:10px;border-radius:10px;border:1px solid #333;background:#1a1c22;color:#FFD700;}
    #week {margin-top:20px;padding-top:15px;border-top:1px solid #333;}
    #week h3 {margin-top:0;}
    canvas {background:#111319;border-radius:14px;margin-top:10px;}
    @media(max-width:1200px){
      .container{flex-direction:column;align-items:center;}
      .side-img{flex-direction:row;width:100%;justify-content:space-between;}
      .side-img img{width:48%;}
      .app{width:100%;}
    }
  </style>
</head>
<body>
  <!-- Видео фон -->
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="1.mp4" type="video/mp4">
  </video>

  <header>
    <h1 id="title">AI Diet Planner (online)</h1>
    <p id="subtitle">Загрузи фото — получи готовую диету</p>
    <div id="lang-switcher">
      <img class="flag active" data-lang="ru" src="https://flagcdn.com/w40/ru.png" alt="RU">
      <img class="flag" data-lang="en" src="https://flagcdn.com/w40/gb.png" alt="EN">
      <img class="flag" data-lang="ka" src="https://flagcdn.com/w40/ge.png" alt="GE">
    </div>
    <a href="diets.html" class="btn">Перейти к диетам</a>
  </header>

  <div class="container">
    <div class="side-img"><img src="11.png" alt="11"></div>

    <main class="app">
      <section class="card">
        <h2 id="uploadTitle">Загрузка фото</h2>
        <label class="btn" for="file" id="uploadBtn">Выбрать фото</label>
        <input type="file" id="file" accept="image/*">
        <div class="preview" style="margin-top:16px"><img id="img" hidden></div>
        <div class="inputs">
          <input type="number" id="height" placeholder="Рост (см)">
          <input type="number" id="weight" placeholder="Вес (кг)">
        </div>
        <button class="btn" id="analyze">Назначить диету</button>
      </section>

      <section class="card">
        <h2 id="resultTitle">Твоя диета</h2>
        <div id="result" class="diet">Здесь появится план питания</div>
        <div id="week"></div>
        <h2>График веса и калорий</h2>
        <canvas id="chart" width="400" height="200"></canvas>
        <div id="payNotice" style="margin-top:10px;color:#60a5fa;font-weight:bold;"></div>
      </section>
    </main>

    <div class="side-img"><img src="10.png" alt="10"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Флаг платной функции
    let isAdmin = false;

    // Переводы
    const translations = {
      ru: {
        title: "AI Планировщик диет (онлайн)",
        subtitle: "Загрузи фото — получи готовую диету",
        uploadTitle: "Загрузка фото",
        uploadBtn: "Выбрать фото",
        resultTitle: "Твоя диета",
        analyze: "Назначить диету",
        payNotice: "График доступен только после оплаты!"
      },
      en: {
        title: "AI Diet Planner (online)",
        subtitle: "Upload photo — get your diet",
        uploadTitle: "Upload photo",
        uploadBtn: "Choose photo",
        resultTitle: "Your diet",
        analyze: "Get diet",
        payNotice: "Chart available only after payment!"
      },
      ka: {
        title: "AI დიეტის პლანერი (ონლაინ)",
        subtitle: "ატვირთე ფოტო — მიიღე დიეტა",
        uploadTitle: "ფოტოს ატვირთვა",
        uploadBtn: "აირჩიე ფოტო",
        resultTitle: "შენი დიეტა",
        analyze: "დიეტის მიღება",
        payNotice: "გრაფიკი ხელმისაწვდომია მხოლოდ გადახდის შემდეგ!"
      }
    };

    let currentLang = "ru";

    function setLanguage(lang) {
      currentLang = lang;
      document.getElementById("title").innerText = translations[lang].title;
      document.getElementById("subtitle").innerText = translations[lang].subtitle;
      document.getElementById("uploadTitle").innerText = translations[lang].uploadTitle;
      document.getElementById("uploadBtn").innerText = translations[lang].uploadBtn;
      document.getElementById("resultTitle").innerText = translations[lang].resultTitle;
      document.getElementById("analyze").innerText = translations[lang].analyze;

      document.querySelectorAll(".flag").forEach(flag => flag.classList.remove("active"));
      document.querySelector(`.flag[data-lang=${lang}]`).classList.add("active");
    }

    document.querySelectorAll(".flag").forEach(flag => {
      flag.addEventListener("click", () => setLanguage(flag.dataset.lang));
    });

    // Загрузка фото
    const fileInput = document.getElementById("file");
    const img = document.getElementById("img");
    fileInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if (file) {
        img.src = URL.createObjectURL(file);
        img.hidden = false;
      }
    });

    // Пример данных диет
    const diets = {
      ru: ["Завтрак: овсянка с фруктами", "Обед: куриная грудка и овощи", "Ужин: рыба и салат"],
      en: ["Breakfast: oatmeal with fruits", "Lunch: chicken breast with veggies", "Dinner: fish and salad"],
      ka: ["საუზმე: შვრიის ფაფა ხილით", "ლანჩი: ქათმის მკერდი და ბოსტნეული", "ვახშამი: თევზი და სალათი"]
    };

    // Генерация диеты
    document.getElementById("analyze").addEventListener("click", () => {
      const plan = diets[currentLang];
      const result = document.getElementById("result");
      result.innerHTML = plan.join("<br>");

      // Озвучка
      const utterance = new SpeechSynthesisUtterance(plan.join(", "));
      speechSynthesis.speak(utterance);

      // График
      if (!isAdmin) {
        document.getElementById("chart").style.display = "none";
        document.getElementById("payNotice").innerText = translations[currentLang].payNotice;
      } else {
        document.getElementById("chart").style.display = "block";
        document.getElementById("payNotice").innerText = "";
        renderChart();
      }
    });

    function renderChart() {
      const ctx = document.getElementById("chart").getContext("2d");
      new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],
          datasets: [
            {
              label: "Калории",
              data: [2000,1800,1900,1700,2100,1950,1800],
              borderColor: "#60a5fa",
              fill:false
            },
            {
              label: "Вес",
              data: [80,79.8,79.5,79.3,79.2,79.0,78.8],
              borderColor: "#6ee7b7",
              fill:false
            }
          ]
        }
      });
    }
  </script>
</body>
</html>
